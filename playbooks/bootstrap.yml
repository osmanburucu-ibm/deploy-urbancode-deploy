---
- name: Bootstrap all hosts
  hosts: all
  become: true
  gather_facts: true

  roles:
    - role: robertdebock.bootstrap

- name: Configuring the system
  hosts: all
  tasks:
  - name: Disable SELinux
    become: true
    selinux:
      state: disabled
    when: ansible_facts['os_family'] == "RedHat"

  - name: Add epel repository
    become: true
    roles:
      - role: geerlingguy.repo-epel
        when: ansible_facts['os_family'] == "RedHat"

  - name: Update all hosts
    become: true
    gather_facts: true
    roles:
      - robertdebock.update

  - name: Add hostname+ip to /etc/hosts
    become: true
    roles:
      - role: holms.fqdn
        when: base_fqdn_set
